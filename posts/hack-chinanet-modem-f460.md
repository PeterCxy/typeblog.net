```
{
  "title": "破解电信Modem F460的超级用户权限并设置自动拨号",
  "url": "hack-chinanet-modem-f460",
  "date": "2014-08-19",
  "parser": "Markdown"
}
```


这两天，我的TP-Link坏了，网速各种奇葩。

本想直接使用电信送的猫（型号是F460）的无线路由功能，但是这玩意儿默认是桥接模式，连上以后还要通过 `PPPOE` 拨号才能上网。对于默认不支持拨号的Android手机来说，这东西完全没法用。我需要一个能自动拨号的无线路由器。

因为懒得买路由器，我就去网上查各种资料然后瞎折腾起来。

<!--more-->

首先，以前传闻的 `nE7jA%5m` 这个密码是不能使用的。准确地说，这个密码只在Modem启用前有效。一旦被安装，这个密码就会被修改。不过还好，这个型号猫的root密码都是root(这个是我网上查到的)，所以可以通过 `telnet` 来搞定。

本教程仅保证适用于 `F460` 型号，其他的猫可以参考但不保证有效。

### 准备

我使用的电脑系统是 `ArchLinux`，当然，你不一定要用 `Linux`，因为 `telnet` 这个工具命令在很多系统上都有。`Windows` `Mac` ，甚至 `Android`（包含 `BusyBox`），都可以使用这个命令。

先连接到猫的无线网，然后打开一个终端(命令行)，输入

```sh
telnet 192.168.1.1
```

注意此处假设你的网关地址是 `192.168.1.1`, 当然，对于F460这个型号而言，如果没有手动修改，网关都是这个。

命令输入后回车，系统会尝试登陆到路由器，这期间会询问你用户名和密码。当出现 `Login:` 时，输入 `root`，回车，然后出现 `Password` 时，同样输入 `root` （此处的输入没有回显，不要担心，同样输入后回车即可）。

如果登陆成功，将显示 `Busybox` 等两行内容，然后会自动进入一个Unix shell环境。

### 修改超级用户密码

此处的超级用户指的是 `192.168.1.1` 管理页面的 `telecomadmin` 用户。

其实这里是可以直接查看到 `telecomadmin` 的密码的，不过由于本人太懒，所以直接用命令修改了超级用户的密码，这样就不用再复制粘贴了。

在上面打开的那个命令行里面继续输入

```sh
sendcmd 1 DB set UserInfo 0 Password <pass>
```

把 `<pass>` (包括尖括号) 换成你想要设置的密码。输入完成后回车，此时密码就设置完成了，接下来可以直接输入 `exit` 退出路由器。

### 登陆控制台

浏览器打开 `192.168.1.1`, 用户名填入 `telecomadmin` ，密码填入刚刚设置的密码，然后登陆，即可进入具有超级权限的控制台。

进入控制台的第一步，是切换到 `网络` 选项卡，在 `连接名称` 的下拉菜单中选择带有 `TRXXX` （XXX是任意0～9的数字），然后点击右下角的 `删除` 按钮。接下来，切换到 `网络——远程管理`，把周期上报取消掉然后保存。

这两步的目的是保证你的密码和配置不会再被电信改回去。

### 配置自动拨号

配置自动拨号的本质是把原有的 `桥接` 模式改为 `路由` 模式。

切换回 `网络——宽带设置`， 在 `连接名称` 的下拉菜单中查找名称类似 `X_INTERNET_B_VID_XXXX` 的一项, 记住 `VID` 后面的数字 `XXXX` （可能不一定是四位数），然后在下拉菜单中选择 `新建WAN连接`

接下来，在 `模式` 下拉菜单中选择 `PPPoE`, 在 `端口绑定` 中选择 `SSID 1` `SSID 2` `SSID 4`，然后在 `VLAN ID` 中填写刚刚记下来的那个数字。最后在 `用户名` `密码` 中填入你的 `PPPoE` 帐号信息，保存，然后重启Modem。

重启完成后，尝试重新连接到这个热点，看看是不是不需要拨号就可以直接上网了？

### 小结

1. 电信的这个桥接设计真脑残
2. 电信真蛋疼，root都不设个复杂密码，还要超级用户作甚
3. 电信你为什么要在我的猫上留一个你可以随便进入的后门
4. 以后安装宽带的时候可以尝试让安装师傅直接告诉你超级密码
